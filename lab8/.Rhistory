library("tidyverse")
library("tidyverse")
library("naniar")
library("skimr")
library("janitor")
library("tidyverse")
library("skimr")
library("janitor")
library("palmerpenguins")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(dplyr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
dim(fisheries)
names(fisheries)
anyNA(fisheries)
new_fisheries <- clean_names(fisheries)
new_fisheries$country <- as.factor(new_fisheries$country)
new_fisheries$isscaap_group_number  <- as.factor(new_fisheries$isscaap_group_number )
new_fisheries$asfis_species_number  <- as.factor(new_fisheries$asfis_species_number )
new_fisheries$fao_major_fishing_area  <- as.factor(new_fisheries$fao_major_fishing_area )
new_fisheries$year
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(number_countries=n_distinct(country))
specific_fish <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarise(number_species = n_distinct(asfis_species_number))
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
arrange(desc(catch))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarise(total_catch= sum(catch))%>%
arrange(desc(total_catch))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(asfis_species_name == "Cephalopoda") %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
fisheries_tidy %>%
group_by(asfis_species_number) %>%
select(year, asfis_species_number, catch, common_name) %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(most_caught = sum(catch)) %>%
right_join(fisheries_tidy  %>%
filter(year >= 2008 & year <= 2012) %>%
distinct(asfis_species_number, common_name),
by = "asfis_species_number" ) %>%
arrange(desc(most_caught))
penguins %>%
tabyl(island, species)
penguins <- penguins
penguins %>%
group_by(island) %>%
summarize(mean_body_mass_g=mean(body_mass_g, na.rm=T)) # remember to remove those NA's!
penguins %>%
group_by(island, species) %>%
summarize(n_penguins=n(), .groups = 'keep')
penguins %>%
count(island, species) #counting categorical varibales
penguins %>%
tabyl(island, species)
penguins %>%
filter(island == "Adelie") %>%
summarise(mean_bill_length = mean(bill_length_mm, na.rm = T),
mean_bill_depth = mean(bill_depth_mm, na.rm = T),
mean_flipper_length = mean(flipper_length_mm, na.rm = T),
mean_body_mass= mean(body_mass_g, na.rm = T),
n=n())
penguins %>%
filter(species == "Adelie") %>%
summarise(mean_bill_length = mean(bill_length_mm, na.rm = T),
mean_bill_depth = mean(bill_depth_mm, na.rm = T),
mean_flipper_length = mean(flipper_length_mm, na.rm = T),
mean_body_mass= mean(body_mass_g, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(mean_bill_length = mean(bill_length_mm, na.rm = T),
mean_bill_depth = mean(bill_depth_mm, na.rm = T),
mean_flipper_length = mean(flipper_length_mm, na.rm = T),
mean_body_mass= mean(body_mass_g, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(mean_bill_length = mean(bill_length_mm, na.rm = T),
n=n())
names(penguins)
penguins %>%
count(sex, island)
penguins %>%
summarize(distinct_species = n_distinct(species),
distinct_island = n_distinct(island),
distinct_sex = n_distinct(sex))
penguins %>%
summarize(across(c(species, island, sex), n_distinct))
penguins %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
group_by(sex) %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
summarise_all(n_distinct)
penguins %>%
summarize(across(!c(species, island, sex, year),
mean, na.rm=T))
penguins %>%
summarise(across(starts_with("bill"), n_distinct))
names(penguins)
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean()))
summarise(across(contains("mm"), mean)
penguins %>%
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T))
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T),
across(contains("mm"), sd, na.rm = T)
n=n())
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T),
across(contains("mm"), sd, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T, sd),
n=n())
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(across(c(contains("mm"), body_mass_g), mean, na.rm = T),
n=n())
penguins %>%
group_by(species) %>%
summarise(across(c(contains("mm"), body_mass_g), sd, na.rm = T),
n=n())
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
glimpse(life_history)
summary(life_history)
library(purrr)
life_history %>%
map_df(~ sum(is.na(.)))
?if_else
life_history %>%
mutate(new_mass, if_else(-999, NA, mass))
life_history %>%
mutate(new_mass= mass, if_else(-999, NA, mass))
life_history %>%
mutate(mass= new_mass, if_else(-999, NA, mass))
life_history %>%
replace_with_na(replace = list == -999)
life_history %>%
replace_with_na(replace = list = -999)
replace_with_na(replace = list(x= -999,-999.00,-999.0)
replace_with_na(replace = list(x= -999,-999.00,-999.0)
life_history %>%
replace_with_na(replace = list(x= -999,-999.00,-999.0))
life_history2 <- life_history %>%
replace_with_na(replace = list(x= -999,-999.00,-999.0))
life_history %>%
replace_with_na(replace = list(x= -999,-999.00,-999.0))
life_history <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", "" ".""-999)) %>% clean_names()
life_history <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", "", ".","-999", "not measured")) %>% clean_names()
life_history <- read_csv("data/mammal_lifehistories_v3.csv")) %>% clean_names()
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
# finds and replaces all NAs in data frame, must know how ALL NA's are represented in data frame. DO NOT USE THIS BY DEFAULT.
```
life_history %>%
replace_with_na(replace = list(x= -999,-999.00,-999.0))
#this would be hard to do for every single variable
life_history <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", "", ".","-999", "not measured")) %>% clean_names()
hist(life_history$max_life)
life_history <-
life_history %>%
mutate(max_life=na_if(max_life, 0))
miss_var_summary(life_history)
hist(life_history$max_life)
life_history %>%
group_by(order) %>%
select(order, wean_mass) %>%
miss_var_summary(order=T)
life_history %>%
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
wildlife <- read_csv("data/cites.csv") %>% clean_names()
glimpse(wildlife)
View(wildlife)
summary(wildlife)
wildlife %>%
miss_var_summary()
wildlife %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(pct_miss))
library(visdat)
vis_dat(life_history) #classes of data
vis_miss(life_history)
miss_var_summary(life_history_advance)
