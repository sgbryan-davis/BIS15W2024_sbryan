knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
dim(fisheries)
names(fisheries)
any.na(fisheries)
na.any(fisheries)
anyNA(fisheries)
tidy_names(fisheries)
fisheries <- as.factor(fisheries$Country, fisheries$`ISSCAAP group#`)
fisheries <-
fisheries$Country <- as.factor(fisheries$Country)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
fisheries %>%
fisheries$Country <- as.factor(fisheries$Country)%>%
fisheries$  <- as.factor(fisheries$Country)
fisheries %>%
fisheries$Country <- as.factor(fisheries$Country)
fisheries$Country <- as.factor(fisheries$Country)
fisheries <- tidy_names(fisheries)
fisheries <-
tidy_names(fisheries)
View(fisheries)
names(fisheries)
new_fisheries <- rename(fisheries, "Country"="country", "Common name" ="common_name", "ISSCAAP group#"="isscaap_group_number" , "ISSCAAP taxonomic group"= "isscaap_taxanomic_group", "ASFIS species#"= "asfis_species_number", "ASFIS species name"= "asfis_species_name" ,"FAO major fishing area"= "fao_major_fishing_area" , "Measure" = "measure" )
new_fisheries <- rename(fisheries, "country"="Country",   "common_name" ="Common name", "isscaap_group_number" ="ISSCAAP group#" ,  "isscaap_taxanomic_group"="ISSCAAP taxonomic group",  "asfis_species_number" = "ASFIS species#",  "asfis_species_name" = "ASFIS species name" , "fao_major_fishing_area" = "FAO major fishing area" ,  "measure" = "Measure"  )
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
new_fisheries <- rename(fisheries, "country"="Country",   "common_name" ="Common name", "isscaap_group_number" ="ISSCAAP group#" ,  "isscaap_taxonomic_group"="ISSCAAP taxonomic group",  "asfis_species_number" = "ASFIS species#",  "asfis_species_name" = "ASFIS species name" , "fao_major_fishing_area" = "FAO major fishing area" ,  "measure" = "Measure"  )
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries$Country <- as.factor(fisheries$Country)
new_fisheries$country <- as.factor(new_fisheries$country)
new_fisheries$isscaap_group_number  <- as.factor(fisheries$isscaap_group_number )
new_fisheries$isscaap_group_number  <- as.factor(new_fisheries$isscaap_group_number )
new_fisheries$asfis_species_number  <- as.factor(new_fisheries$asfis_species_number )
new_fisheries$fao_major_fishing_area  <- as.factor(new_fisheries$fao_major_fishing_area )
tidy_names(fisheries)
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries %>%
summarise(number_countries=n_distinct(country))
tidy_fisheries %>%
summarise(number_countries=n_distinct(country))
fisheries_tidy %>%
summarise(number_countries=n_distinct(country))
fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarise(number_species = n_distinct(asfis_species_number))
fisheries_tidy %>%
select(country, catch) %>%
arrange(catch)
fisheries_tidy %>%
select(country, catch) %>%
arrange(! catch)
fisheries_tidy %>%
select(country, catch) %>%
arrange(desc( catch))
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_") %>%
arrange(desc(catch))
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_")
fisheries_tidy %>%
select(country, asfis_species_name, catch)
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
arrange(asfis_species_name)
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == contains"Sardina pilchardus")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == contains("Sardina pilchardus"))
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_", na.rm = T)
knitr::opts_chunk$set(echo = TRUE)
y <- 154, 56 # creates a vector, can be stacked into matrices
x <-  34, 46
z <- 45, 78
z <- c(45, 78)
y <- c(154, 56) # creates a vector, can be stacked into matrices
x <-  c(34, 46)
fake_matrix <- c(x, y ,z)
mean(c(x ,y, z))
x <- as.integer(x)
x <- as.numeric(x)
faker_matrix <- matrix(fake_matrix, nrow=3, byrow = t) # byrow=T means the data is filled by columns, this gives the matrix structure
faker_matrix <- matrix(fake_matrix, nrow=3, byrow = T) # byrow=T means the data is filled by columns, this gives the matrix structure
faker_matrix
library(tidyverse)
library(dplyr)
library(janitor)
rownames(faker_matrix) <- schmoney_in_bank
schmoney <- c(bank1, bank2)
schmoney <- c("bank1", "bank2")
colnames(faker_matrix) <- schmoney
z <- c(23445, 99343)
peoples <- c("bob", "steven", "big stepper")
colnames(faker_matrix) <- schmoney
rownames(faker_matrix) <- peoples
faker_matrix
n_distinct()
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
newish_fisheries <- clean_names(fisheries)
View(newish_fisheries)
new_fisheries <- clean_names(fisheries)
new_fisheries$country <- as.factor(new_fisheries$country)
new_fisheries$isscaap_group_number  <- as.factor(new_fisheries$isscaap_group_number )
new_fisheries$asfis_species_number  <- as.factor(new_fisheries$asfis_species_number )
new_fisheries$fao_major_fishing_area  <- as.factor(new_fisheries$fao_major_fishing_area )
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(number_countries=n_distinct(country))
fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
specific_fish <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarise(number_species = n_distinct(asfis_species_number))
arrange(desc(catch))
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000)
arrange(desc(catch))
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
arrange(desc(catch))
fisheries_tidy %>%
select(asfis_species_name, conatains("Sardina pilchardus"))
fisheries_tidy %>%
select(asfis_species_name, contains("Sardina pilchardus"))
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "_Sardina pilchardus_", na.rm =T)
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(asfis_species_name == "Sardina pilchardus")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(year(between, 1990, 2000))
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(year => 1990 & year =< 2000))
View(new_fisheries)
fisheries_tidy$year <- is.numeric(fisheries_tidy$year)
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
arrange(desc(catch))
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000)
View(fisheries_tidy)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
dim(fisheries)
names(fisheries)
anyNA(fisheries)
new_fisheries <- clean_names(fisheries)
new_fisheries$country <- as.factor(new_fisheries$country)
new_fisheries$isscaap_group_number  <- as.factor(new_fisheries$isscaap_group_number )
new_fisheries$asfis_species_number  <- as.factor(new_fisheries$asfis_species_number )
new_fisheries$fao_major_fishing_area  <- as.factor(new_fisheries$fao_major_fishing_area )
new_fisheries$year
fisheries_tidy <- new_fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(number_countries=n_distinct(country))
specific_fish <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarise(number_species = n_distinct(asfis_species_number))
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000)
fisheries_tidy %>%
select(country, catch, year) %>%
filter(year == 2000) %>%
arrange(desc(catch))
filter(asfis_species_name == "Sardina pilchardus")
filter(asfis_species_name == "Sardina pilchardus")
filter(asfis_species_name == "Sardina pilchardus")
filter(asfis_species_name == "Sardina pilchardus")
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(year => 1990 & year =< 2000)) %>%
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(year => 1990 & year =< 2000) %>%
library(tidyverse)
library(janitor)
library(skimr)
fisheries_tidy %>%
select(country, asfis_species_name, catch) %>%
filter(year => 1990 & year =< 2000) %>%
fisheries_tidy %>%
select(country, asfis_species_name, catch, year) %>%
filter(year => 1990 & year =< 2000) %>%
fisheries_tidy %>%
select(country, asfis_species_name, catch, year) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(asfis_species_name == "Sardina pilchardus")
fisheries_tidy %>%
select(country, asfis_species_name, catch, year) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
arrange(desc(catch))
arrange(desc(total_catch))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(year >= 1990 & year <= 2000) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarise(total_catch= sum(catch))%>%
arrange(desc(total_catch))
View(fisheries_tidy)
fisheries_tidy %>%
group_by(country) %>%
select(countries, asfis_species_name, catch, year) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(asfis_species_name == "Cephalopoda") %>%
filter(year, between, 2008, 2012) %>%
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
fisheries_tidy %>%
group_by(country) %>%
select(country, asfis_species_name, catch, year) %>%
filter(asfis_species_name == "Cephalopoda") %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(total_ceph = sum(catch)) %>%
arrange(desc(total_ceph))
fisheries_tidy %>%
group_by(asfis_species_number) %>%
select(year, asfis_species_number, catch) %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(most_caught = sum(catch)) %>%
arrange(desc(most_caught))
fisheries_tidy %>%
subset(asfis_species_number == "1480401601")
fisheries_tidy %>%
subset(asfis_species_number == "1480401601") %>%
head(asfis_species_number)
fisheries_tidy %>%
subset(asfis_species_number == "1480401601")
fisheries_tidy %>%
group_by(asfis_species_number) %>%
select(year, asfis_species_number, catch, common_name) %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(most_caught = sum(catch)) %>%
arrange(desc(most_caught))
library(dplyr)
fisheries_tidy %>%
group_by(asfis_species_number) %>%
select(year, asfis_species_number, catch, common_name) %>%
filter(year >= 2008 & year <= 2012) %>%
summarise(most_caught = sum(catch)) %>%
left_join(fisheries_tidy  %>%
filter(year >= 2008 & year <= 2012) %>%
distinct(asfis_species_number, common_name),
by = "asfis_species_number" ) %>%
arrange(desc(most_caught))
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch))
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch), rm.na =T)
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch), na.rm =T)
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch, , na.rm =T))
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch, na.rm =T))
fisheries_tidy %>%
group_by(country) %>%
select(country, year, catch) %>%
summarise(total_catch_country= sum(catch, na.rm =T)) %>%
arrange(desc(total_catch_country))
