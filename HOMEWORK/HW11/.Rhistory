summarise(mean_mort30 = mean(mort30, na.rm= T))
surgery %>%
group_by(month) %>%
summarise(mean_mort30 = mean(mort30, na.rm= T))
surgery %>%
group_by(month) %>%
summarise(mean_mort30 = mean(mort30, na.rm= T))
surgery %>%
group_by(month) %>%
summarise(mean_mort30 = mean(mort30, na.rm= T))
glimpse(surgery)
surgery %>%
group_by(month, mort30) %>%
ggplot(aes(mort30, fill = month))+
geom_density() +
facet_wrap(~month)
surgery %>%
group_by(month, mort30)
mutate(mort_complication, if_else(mort30 == "yes", 1, 0 )
surgery %>%
surgery %>%
group_by(month) %>%
mutate(mort30, if_else(mort30 == "yes", 1, 0 ))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "yes", 1, 0 ))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 ))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
ggplot(aes(danger_level, fill = month))+
geom_density() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
ggplot(aes(danger_level, fill = month))+
geom_histogram() +
facet_wrap(~month)
ggplot(aes(danger_level, fill = month))+
geom_histogram() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
filter(danger_level != 0) %>%
ggplot(aes(danger_level, fill = month))+
geom_histogram() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
filter(danger_level != 0) %>%
ggplot(aes(as.factor(danger_level), fill = month))+
geom_histogram() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
filter(danger_level != 0) %>%
ggplot(aes(as.factor(danger_level), fill = month))+
geom_density() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
filter(danger_level != 0) %>%
ggplot(aes(danger_level, fill = month))+
geom_histogram() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(mean_danger_level, fill = month))+
geom_histogram() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(mean_danger_level, fill = month))+
geom_density() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(mean_danger_level, fill = month))+
geom_bar() +
facet_wrap(~month)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(mean_danger_level, fill = month))+
geom_bar()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_bar()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_bcol()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
arrange(-mean_danger_level)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month, reorder(Jan, Dec)))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month, reorder(month, Jan)))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col(reorder(month, Jan))
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = months.abb)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = months.abb)
library(ggplot2)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=month, y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = months.abb)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = months.abb)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
factor(levels = month.abb)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
factor(labels = month.abb)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = mort30_num + complication_num) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(labels = month.abb)
y= "Risk of danger")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(labels = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Risk of danger")
arrange(-mean_danger_level)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
arrange(-mean_danger_level)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(labels = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Risk of danger")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month, reorder(levels(month.abb))))+
geom_col() +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Risk of danger")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
factor(levels(month.abb)) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Risk of danger")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Risk of danger")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level))+
scale_x_discrete(limits = month.abb) +
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
library(ggplot2)
surgery <- read_csv("data/surgery.csv")
glimpse(surgery)
head(surgery)
names(surgery)
summary(surgery)
surgery %>%
group_by(race) %>%
summarise(number_participant = n())
surgery %>%
group_by(race) %>%
filter(race != "na") %>%
summarise(number_participant = n()) %>%
ggplot(aes(x= race, y = number_participant, fill = race)) +
geom_col() +
labs (title = "Paritcipants by Race",
x= "Race",
y= "Number of Participants")
surgery %>%
group_by(gender) %>%
filter(gender != "NA") %>%
summarise(mean_age = mean(age, na.rm = T))
surgery %>%
group_by(gender) %>%
filter(gender != "NA") %>%
ggplot(aes(x= gender, y= age, fill = gender)) +
geom_boxplot() +
labs(title = "Age Distribution by Gender",
x= "Gender",
y= "Age (years)") +
theme(title = element_text(size = rel(1.5), hjust = 0.5))
surgery %>%
group_by(asa_status) %>%
ggplot(aes(asa_status, fill= asa_status)) +
geom_bar() +
labs(title = "Distribution of Patient Health Pre-Procedure",
x = "ASA Status",
y = "Number of Participants")
surgery %>%
filter(asa_status != "NA")%>%
ggplot(aes(bmi)) +
geom_density(fill= "purple3", alpha = .4) +
facet_wrap(~ asa_status)
surgery %>%
group_by(ahrq_ccs) %>%
summarise(mean_30day_mort = mean(ccsmort30rate)) %>%
top_n(5, mean_30day_mort) %>%
arrange(-mean_30day_mort)
surgery %>%
group_by(ahrq_ccs) %>%
summarise(mean_complication_risk = mean(complication_rsi)) %>%
top_n(5, mean_complication_risk) %>%
arrange(-mean_complication_risk)
surgery %>%
ggplot(aes(x=ahrq_ccs, y= ccsmort30rate, reorder(ahrq_ccs, -ccsmort30rate))) +
geom_boxplot() +
coord_flip()
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
arrange(-mean_danger_level)
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level))+
scale_x_discrete(limits = month.abb) +
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level))+
scale_x_discrete(limits = month.abb) +
geom_col(fill = month()) +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
geom_col(fill = month +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity").
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level))+
scale_x_discrete(limits = month.abb) +
geom_col(fill = month ) +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level))+
scale_x_discrete(limits = month.abb) +
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
surgery %>%
group_by(month) %>%
mutate(mort30_num = if_else(mort30 == "Yes", 1, 0 )) %>%
mutate(complication_num = if_else(complication == "Yes", 1, 0)) %>%
mutate(danger_level = (mort30_num + complication_num)/2) %>%
summarise(mean_danger_level = mean(danger_level)) %>%
ggplot(aes(x=as.factor(month), y=mean_danger_level, fill = month))+
scale_x_discrete(limits = month.abb) +
geom_col() +
scale_x_discrete(limits = month.abb) +
labs(title = "Risk of mortality or Complications",
x= "Month",
y= "Probability of Complication or Mortatlity")
